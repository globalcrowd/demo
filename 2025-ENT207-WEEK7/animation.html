<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive HTTP Request Flow - Image Analysis</title>
    <style>
        body {
            margin: 0;
            padding: 20px;
            font-family: Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
        }
        
        #container {
            background: white;
            border-radius: 20px;
            padding: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            max-width: 1400px;
            width: 95%;
        }
        
        #controls {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        
        button {
            padding: 15px 30px;
            font-size: 16px;
            font-weight: bold;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        
        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0,0,0,0.2);
        }
        
        button:active {
            transform: translateY(0);
        }
        
        #prevBtn {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
        }
        
        #nextBtn {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            color: white;
        }
        
        #playBtn {
            background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);
            color: white;
        }
        
        #resetBtn {
            background: linear-gradient(135deg, #fa709a 0%, #fee140 100%);
            color: white;
        }
        
        #stepIndicator {
            text-align: center;
            font-size: 18px;
            font-weight: bold;
            color: #667eea;
            margin-bottom: 10px;
            min-height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: #f0f4ff;
            border-radius: 10px;
            padding: 15px;
        }
        
        .hidden {
            opacity: 0;
            pointer-events: none;
        }
        
        .visible {
            opacity: 1;
            transition: opacity 0.5s;
        }
        
        .highlight {
            filter: drop-shadow(0 0 10px rgba(255, 215, 0, 0.8));
            animation: pulse 1s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { filter: drop-shadow(0 0 10px rgba(255, 215, 0, 0.8)); }
            50% { filter: drop-shadow(0 0 20px rgba(255, 215, 0, 1)); }
        }
        
        .arrow-animate {
            animation: dash 2s linear infinite;
        }
        
        @keyframes dash {
            to {
                stroke-dashoffset: -30;
            }
        }
    </style>
</head>
<body>
    <div id="container">
        <div id="stepIndicator">Click "Next Step" or "Auto Play" to begin the journey</div>
        <div id="controls">
            <button id="resetBtn" onclick="resetAnimation()">‚èÆ Reset</button>
            <button id="prevBtn" onclick="previousStep()">‚¨Ö Previous</button>
            <button id="nextBtn" onclick="nextStep()">Next Step ‚û°</button>
            <button id="playBtn" onclick="autoPlay()">‚ñ∂ Auto Play</button>
        </div>
        
        <svg id="mainSvg" viewBox="0 0 1200 850" xmlns="http://www.w3.org/2000/svg">
            <defs>
                <!-- Gradient backgrounds -->
                <linearGradient id="clientGrad" x1="0%" y1="0%" x2="0%" y2="100%">
                    <stop offset="0%" style="stop-color:#667eea;stop-opacity:1" />
                    <stop offset="100%" style="stop-color:#764ba2;stop-opacity:1" />
                </linearGradient>
                <linearGradient id="serverGrad" x1="0%" y1="0%" x2="0%" y2="100%">
                    <stop offset="0%" style="stop-color:#f093fb;stop-opacity:1" />
                    <stop offset="100%" style="stop-color:#f5576c;stop-opacity:1" />
                </linearGradient>
                <linearGradient id="aiGrad" x1="0%" y1="0%" x2="0%" y2="100%">
                    <stop offset="0%" style="stop-color:#4facfe;stop-opacity:1" />
                    <stop offset="100%" style="stop-color:#00f2fe;stop-opacity:1" />
                </linearGradient>
                
                <!-- Arrow markers -->
                <marker id="arrowhead" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
                    <polygon points="0 0, 10 3, 0 6" fill="#333" />
                </marker>
                <marker id="arrowheadGreen" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
                    <polygon points="0 0, 10 3, 0 6" fill="#00c853" />
                </marker>
            </defs>
            
            <!-- Title -->
            <text x="600" y="55" font-family="Arial, sans-serif" font-size="28" font-weight="bold" text-anchor="middle" fill="#1a1a1a">
                Understanding Client-Server-API Architecture
            </text>
            <text x="600" y="90" font-family="Arial, sans-serif" font-size="14" text-anchor="middle" fill="#444">
                Learn how data flows between your app, your backend code, and external AI services
            </text>
            
            <!-- CLIENT SIDE -->
            <g id="client">
                <rect x="50" y="130" width="280" height="600" rx="20" fill="url(#clientGrad)" opacity="0.9"/>
                <rect x="70" y="150" width="240" height="100" rx="5" fill="white" opacity="0.3"/>
                
                <text x="190" y="185" font-family="Arial, sans-serif" font-size="20" font-weight="bold" text-anchor="middle" fill="white">
                    CLIENT
                </text>
                
                <!-- Device icons -->
                <text x="170" y="220" font-family="Arial, sans-serif" font-size="28" text-anchor="middle">üì±</text>
                <text x="210" y="220" font-family="Arial, sans-serif" font-size="28" text-anchor="middle">üåê</text>
                
                <text x="190" y="240" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="white" opacity="0.95">
                    Responsive web app, or native app
                </text>
                
                <!-- Upload button -->
                <g id="uploadButton">
                    <rect x="100" y="270" width="180" height="60" rx="10" fill="white" opacity="0.9"/>
                    <text x="190" y="295" font-family="Arial, sans-serif" font-size="14" text-anchor="middle" fill="#667eea">
                        üì∑ Upload Image
                    </text>
                    <text x="190" y="315" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="#999">
                        (User clicks button)
                    </text>
                </g>
                
                <!-- Image preview -->
                <g id="imagePreview" class="hidden">
                    <rect x="100" y="350" width="180" height="120" rx="5" fill="#e0e0e0"/>
                    <text x="190" y="415" font-family="Arial, sans-serif" font-size="36" text-anchor="middle" fill="#999">üñºÔ∏è</text>
                    <text x="190" y="385" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#666">cat-photo.jpg</text>
                </g>
                
                <!-- Loading indicator -->
                <g id="loadingIndicator" class="hidden">
                    <rect x="100" y="490" width="180" height="60" rx="10" fill="white" opacity="0.9"/>
                    <text x="190" y="525" font-family="Arial, sans-serif" font-size="14" text-anchor="middle" fill="#667eea">
                        ‚è≥ Processing...
                    </text>
                </g>
                
                <!-- Result display -->
                <g id="resultDisplay" class="hidden">
                    <rect x="85" y="570" width="210" height="130" rx="10" fill="white" opacity="0.9"/>
                    <text x="190" y="595" font-family="Arial, sans-serif" font-size="13" font-weight="bold" text-anchor="middle" fill="#667eea">
                        ‚úÖ AI Results:
                    </text>
                    <text x="190" y="618" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="#333">
                        Objects: Cat, Sofa
                    </text>
                    <text x="190" y="638" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="#333">
                        Setting: Indoor living room
                    </text>
                    <text x="190" y="658" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="#333">
                        Use: Pet adoption app
                    </text>
                    <text x="190" y="678" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="#333">
                        Use: Furniture catalog
                    </text>
                </g>
            </g>
            
            <!-- SERVER SIDE -->
            <g id="server">
                <rect x="460" y="130" width="280" height="600" rx="20" fill="url(#serverGrad)" opacity="0.9"/>
                <rect x="480" y="150" width="240" height="100" rx="5" fill="white" opacity="0.3"/>
                
                <text x="600" y="185" font-family="Arial, sans-serif" font-size="20" font-weight="bold" text-anchor="middle" fill="white">
                    SERVER
                </text>
                
                <!-- Server icons -->
                <text x="570" y="220" font-family="Arial, sans-serif" font-size="28" text-anchor="middle">üñ•Ô∏è</text>
                <text x="610" y="220" font-family="Arial, sans-serif" font-size="28" text-anchor="middle">‚öôÔ∏è</text>
                <text x="650" y="220" font-family="Arial, sans-serif" font-size="28" text-anchor="middle">üíæ</text>
                
                <text x="600" y="240" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="white" opacity="0.95">
                    Python Django Web Framework
                </text>
                
                <!-- Server steps -->
                <g id="serverStep1" class="hidden">
                    <rect x="490" y="270" width="220" height="60" rx="10" fill="white" opacity="0.2"/>
                    <circle cx="515" cy="300" r="15" fill="white" opacity="0.9"/>
                    <text x="515" y="306" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="#f5576c">1</text>
                    <text x="545" y="306" font-family="Arial, sans-serif" font-size="12" fill="white">
                        Receive image from client
                    </text>
                </g>
                
                <g id="serverStep2" class="hidden">
                    <rect x="490" y="345" width="220" height="60" rx="10" fill="white" opacity="0.2"/>
                    <circle cx="515" cy="375" r="15" fill="white" opacity="0.9"/>
                    <text x="515" y="381" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="#f5576c">2</text>
                    <text x="545" y="381" font-family="Arial, sans-serif" font-size="12" fill="white">
                        Save & encode to base64
                    </text>
                </g>
                
                <g id="serverStep3" class="hidden">
                    <rect x="490" y="420" width="220" height="60" rx="10" fill="white" opacity="0.2"/>
                    <circle cx="515" cy="450" r="15" fill="white" opacity="0.9"/>
                    <text x="515" y="456" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="#f5576c">3</text>
                    <text x="545" y="456" font-family="Arial, sans-serif" font-size="12" fill="white">
                        Send to AI API ‚Üí
                    </text>
                </g>
                
                <g id="serverStep4" class="hidden">
                    <rect x="490" y="495" width="220" height="60" rx="10" fill="white" opacity="0.2"/>
                    <circle cx="515" cy="525" r="15" fill="white" opacity="0.9"/>
                    <text x="515" y="531" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="#f5576c">4</text>
                    <text x="545" y="531" font-family="Arial, sans-serif" font-size="12" fill="white">
                        ‚Üê Receive AI analysis
                    </text>
                </g>
                
                <g id="serverStep5" class="hidden">
                    <rect x="490" y="570" width="220" height="60" rx="10" fill="white" opacity="0.2"/>
                    <circle cx="515" cy="600" r="15" fill="white" opacity="0.9"/>
                    <text x="515" y="606" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="#f5576c">5</text>
                    <text x="545" y="606" font-family="Arial, sans-serif" font-size="12" fill="white">
                        Format & send to client
                    </text>
                </g>
                
                <text x="600" y="695" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="white" opacity="0.8">
                    Your Django code runs here
                </text>
            </g>
            
            <!-- AI SERVICE -->
            <g id="ai-service">
                <rect x="870" y="130" width="280" height="600" rx="20" fill="url(#aiGrad)" opacity="0.9"/>
                <rect x="890" y="150" width="240" height="100" rx="5" fill="white" opacity="0.3"/>
                
                <text x="1010" y="185" font-family="Arial, sans-serif" font-size="20" font-weight="bold" text-anchor="middle" fill="white">
                    AI SERVICE
                </text>
                
                <!-- AI/Cloud icons -->
                <text x="970" y="220" font-family="Arial, sans-serif" font-size="28" text-anchor="middle">‚òÅÔ∏è</text>
                <text x="1010" y="220" font-family="Arial, sans-serif" font-size="28" text-anchor="middle">ü§ñ</text>
                <text x="1050" y="220" font-family="Arial, sans-serif" font-size="28" text-anchor="middle">‚ú®</text>
                
                <text x="1010" y="240" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="white" opacity="0.95">
                    e.g., Gemini, ChatGPT, DeepSeek API
                </text>
                
                <!-- AI brain -->
                <text x="1010" y="320" font-family="Arial, sans-serif" font-size="80" text-anchor="middle">üß†</text>
                
                <!-- AI processing -->
                <g id="aiProcessing" class="hidden">
                    <rect x="900" y="360" width="220" height="280" rx="10" fill="white" opacity="0.15"/>
                    
                    <text x="1010" y="395" font-family="Arial, sans-serif" font-size="13" font-weight="bold" text-anchor="middle" fill="white">
                        Vision AI Analysis
                    </text>
                    
                    <g id="aiStep1" class="hidden">
                        <text x="1010" y="430" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="white">
                            ‚úì Detecting objects...
                        </text>
                    </g>
                    <g id="aiStep2" class="hidden">
                        <text x="1010" y="460" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="white">
                            ‚úì Understanding context...
                        </text>
                    </g>
                    <g id="aiStep3" class="hidden">
                        <text x="1010" y="490" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="white">
                            ‚úì Analyzing scene...
                        </text>
                    </g>
                    <g id="aiStep4" class="hidden">
                        <text x="1010" y="520" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="white">
                            ‚úì Generating suggestions...
                        </text>
                    </g>
                    <g id="aiStep5" class="hidden">
                        <text x="1010" y="550" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="white">
                            ‚úì Creating description...
                        </text>
                    </g>
                    
                    <rect x="920" y="570" width="180" height="40" rx="5" fill="white" opacity="0.9"/>
                    <text x="1010" y="595" font-family="Arial, sans-serif" font-size="12" font-weight="bold" text-anchor="middle" fill="#00f2fe">
                        ‚ö° Complete!
                    </text>
                </g>
                
                <text x="1010" y="695" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="white" opacity="0.8">
                    Google's servers (Gemini API)
                </text>
            </g>
            
            <!-- ARROWS -->
            <!-- Arrow 1: Client to Server -->
            <g id="arrow1" class="hidden">
                <line x1="330" y1="300" x2="460" y2="300" stroke="#333" stroke-width="4" marker-end="url(#arrowhead)" stroke-dasharray="10,5" class="arrow-animate"/>
                <rect x="350" y="275" width="70" height="25" rx="5" fill="white" stroke="#333" stroke-width="2"/>
                <text x="385" y="292" font-family="Arial, sans-serif" font-size="11" font-weight="bold" text-anchor="middle" fill="#333">
                    HTTP POST
                </text>
            </g>
            
            <!-- Arrow 2: Server to AI -->
            <g id="arrow2" class="hidden">
                <line x1="740" y1="450" x2="870" y2="450" stroke="#333" stroke-width="4" marker-end="url(#arrowhead)" stroke-dasharray="10,5" class="arrow-animate"/>
                <rect x="765" y="425" width="70" height="25" rx="5" fill="white" stroke="#333" stroke-width="2"/>
                <text x="800" y="442" font-family="Arial, sans-serif" font-size="11" font-weight="bold" text-anchor="middle" fill="#333">
                    API Call
                </text>
            </g>
            
            <!-- Arrow 3: AI to Server -->
            <g id="arrow3" class="hidden">
                <line x1="870" y1="525" x2="740" y2="525" stroke="#00c853" stroke-width="4" marker-end="url(#arrowheadGreen)" stroke-dasharray="10,5" class="arrow-animate"/>
                <rect x="765" y="500" width="70" height="25" rx="5" fill="white" stroke="#00c853" stroke-width="2"/>
                <text x="800" y="517" font-family="Arial, sans-serif" font-size="11" font-weight="bold" text-anchor="middle" fill="#00c853">
                    JSON Data
                </text>
            </g>
            
            <!-- Arrow 4: Server to Client -->
            <g id="arrow4" class="hidden">
                <line x1="460" y1="600" x2="330" y2="600" stroke="#00c853" stroke-width="4" marker-end="url(#arrowheadGreen)" stroke-dasharray="10,5" class="arrow-animate"/>
                <rect x="350" y="575" width="70" height="25" rx="5" fill="white" stroke="#00c853" stroke-width="2"/>
                <text x="385" y="592" font-family="Arial, sans-serif" font-size="11" font-weight="bold" text-anchor="middle" fill="#00c853">
                    HTML/JSON
                </text>
            </g>
            
            <!-- Bottom explanation -->
            <rect x="50" y="760" width="1100" height="80" rx="10" fill="#f5f5f5" opacity="0.95"/>
            <text x="600" y="785" font-family="Arial, sans-serif" font-size="15" font-weight="bold" text-anchor="middle" fill="#333">
                üí° Key Concepts
            </text>
            <text x="600" y="810" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#666">
                <tspan font-weight="bold">CLIENT</tspan> (what user sees) ‚Üî <tspan font-weight="bold">SERVER</tspan> (your Django code) ‚Üî <tspan font-weight="bold">AI SERVICE</tspan> (External API)
            </text>
            <text x="600" y="830" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="#999">
                HTTP = The "envelope" carrying messages | API = How servers talk to each other | API Key = Your authentication credential
            </text>
        </svg>
    </div>
    
    <script>
        let currentStep = 0;
        let isPlaying = false;
        let playInterval;
        
        const steps = [
            {
                description: "üë§ Step 0: User opens the app and sees the upload button",
                actions: () => {
                    highlight('uploadButton');
                }
            },
            {
                description: "üì§ Step 1: User selects and uploads an image (cat-photo.jpg)",
                actions: () => {
                    show('imagePreview');
                    highlight('imagePreview');
                }
            },
            {
                description: "üåê Step 2: Browser sends HTTP POST request to Django server with image data",
                actions: () => {
                    show('arrow1');
                    show('loadingIndicator');
                    highlight('arrow1');
                }
            },
            {
                description: "üì• Step 3: Django server receives the image file from the client",
                actions: () => {
                    show('serverStep1');
                    highlight('serverStep1');
                }
            },
            {
                description: "üíæ Step 4: Server saves image temporarily and encodes it to base64 format",
                actions: () => {
                    show('serverStep2');
                    highlight('serverStep2');
                }
            },
            {
                description: "üöÄ Step 5: Server sends encoded image to Gemini AI via API call",
                actions: () => {
                    show('serverStep3');
                    show('arrow2');
                    show('aiProcessing');
                    highlight('arrow2');
                }
            },
            {
                description: "üß† Step 6: Gemini AI analyzes the image (detecting objects, understanding context)",
                actions: () => {
                    show('aiStep1');
                    setTimeout(() => show('aiStep2'), 300);
                    setTimeout(() => show('aiStep3'), 600);
                    setTimeout(() => show('aiStep4'), 900);
                    setTimeout(() => show('aiStep5'), 1200);
                    highlight('aiProcessing');
                }
            },
            {
                description: "üì® Step 7: Gemini sends back analysis results as JSON data to server",
                actions: () => {
                    show('serverStep4');
                    show('arrow3');
                    highlight('arrow3');
                }
            },
            {
                description: "üîß Step 8: Django formats the AI response into readable HTML/JSON",
                actions: () => {
                    show('serverStep5');
                    highlight('serverStep5');
                }
            },
            {
                description: "‚úÖ Step 9: Server sends formatted results back to the client browser",
                actions: () => {
                    show('arrow4');
                    highlight('arrow4');
                }
            },
            {
                description: "üéâ Step 10: User sees the AI analysis results displayed beautifully!",
                actions: () => {
                    hide('loadingIndicator');
                    show('resultDisplay');
                    highlight('resultDisplay');
                }
            }
        ];
        
        function show(id) {
            const element = document.getElementById(id);
            if (element) {
                element.classList.remove('hidden');
                element.classList.add('visible');
            }
        }
        
        function hide(id) {
            const element = document.getElementById(id);
            if (element) {
                element.classList.add('hidden');
                element.classList.remove('visible');
            }
        }
        
        function highlight(id) {
            // Remove all highlights
            document.querySelectorAll('.highlight').forEach(el => {
                el.classList.remove('highlight');
            });
            
            // Add highlight to current element
            const element = document.getElementById(id);
            if (element) {
                element.classList.add('highlight');
            }
        }
        
        function updateStepIndicator() {
            const indicator = document.getElementById('stepIndicator');
            if (currentStep < steps.length) {
                indicator.textContent = steps[currentStep].description;
            } else {
                indicator.textContent = "üéä Complete! Click Reset to start over or Previous to review.";
            }
        }
        
        function nextStep() {
            if (currentStep < steps.length) {
                steps[currentStep].actions();
                updateStepIndicator();
                currentStep++;
            }
            
            if (currentStep >= steps.length) {
                stopAutoPlay();
            }
        }
        
        function previousStep() {
            if (currentStep > 0) {
                currentStep--;
                resetAnimation();
                for (let i = 0; i < currentStep; i++) {
                    steps[i].actions();
                }
                updateStepIndicator();
            }
        }
        
        function resetAnimation() {
            stopAutoPlay();
            currentStep = 0;
            
            // Hide all elements
            const hiddenElements = [
                'imagePreview', 'loadingIndicator', 'resultDisplay',
                'arrow1', 'arrow2', 'arrow3', 'arrow4',
                'serverStep1', 'serverStep2', 'serverStep3', 'serverStep4', 'serverStep5',
                'aiProcessing', 'aiStep1', 'aiStep2', 'aiStep3', 'aiStep4', 'aiStep5'
            ];
            
            hiddenElements.forEach(id => hide(id));
            
            // Remove all highlights
            document.querySelectorAll('.highlight').forEach(el => {
                el.classList.remove('highlight');
            });
            
            updateStepIndicator();
        }
        
        function autoPlay() {
            if (isPlaying) {
                stopAutoPlay();
                return;
            }
            
            isPlaying = true;
            document.getElementById('playBtn').textContent = '‚è∏ Pause';
            
            playInterval = setInterval(() => {
                nextStep();
                if (currentStep >= steps.length) {
                    stopAutoPlay();
                }
            }, 2500); // 2.5 seconds per step
        }
        
        function stopAutoPlay() {
            isPlaying = false;
            document.getElementById('playBtn').textContent = '‚ñ∂ Auto Play';
            if (playInterval) {
                clearInterval(playInterval);
            }
        }
        
        // Keyboard shortcuts
        document.addEventListener('keydown', (e) => {
            if (e.key === 'ArrowRight' || e.key === ' ') {
                e.preventDefault();
                nextStep();
            } else if (e.key === 'ArrowLeft') {
                e.preventDefault();
                previousStep();
            } else if (e.key === 'r' || e.key === 'R') {
                e.preventDefault();
                resetAnimation();
            } else if (e.key === 'p' || e.key === 'P') {
                e.preventDefault();
                autoPlay();
            }
        });
        
        // Initialize
        updateStepIndicator();
    </script>
</body>
</html>
